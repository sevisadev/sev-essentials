<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Sev Essentials</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    :root{
      --bg:#4b097b;
      --accent:#8a2be2;
      --accent-dark:#6a0dad;
      --panel:#4b097b;
      --text:#ffffff;
      --glass: rgba(255,255,255,0.04);
      --ease: cubic-bezier(.2,.9,.2,1);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:"Times New Roman",serif;background:var(--bg);color:var(--text);overflow:hidden}
    canvas{position:fixed;top:0;left:0;z-index:-1;transition:opacity .5s var(--ease)}
    .sidebar{position:fixed;top:0;left:0;width:220px;height:100%;background:linear-gradient(180deg,var(--accent),#9f53f0);display:flex;flex-direction:column;align-items:stretch;padding:0;border-right:1px solid rgba(0,0,0,.06);transform:translateX(0);animation:slideIn .45s var(--ease)}
    @keyframes slideIn{from{transform:translateX(-12px);opacity:0}to{transform:none;opacity:1}}
    .sidebar h1{margin:0;padding:20px 10px;text-align:center;font-size:28px;background:transparent}
    .nav-button{display:block;width:90%;margin:10px 10px;padding:12px;background:var(--accent);color:var(--text);border:none;text-align:left;font-size:16px;cursor:pointer;border-top-right-radius:20px;border-bottom-right-radius:20px;transition:transform .18s var(--ease),background .18s var(--ease),box-shadow .18s var(--ease)}
    .nav-button:hover{transform:translateX(6px);background:var(--accent-dark)}
    .nav-button.active{background:var(--panel);box-shadow:inset 0 0 0 2px rgba(255,255,255,0.03)}
    .sidebar-launch-container{margin-top:auto;padding:12px;display:flex;flex-direction:column;gap:8px}
    .rounded-launch-button{padding:10px 20px;background:var(--accent);color:var(--text);border:none;border-radius:30px;cursor:pointer;font-size:15px;width:90%;align-self:center;transition:transform .18s var(--ease),background .18s var(--ease)}
    .rounded-launch-button:hover{transform:translateY(-4px);background:var(--accent-dark)}
    .sidebar-footer{padding:14px 10px;text-align:center;font-size:14px;color:var(--text);text-decoration:underline;cursor:pointer;background:transparent}
    .main-content{margin-left:220px;padding:28px;height:100vh;overflow:auto;transition:margin-left .4s var(--ease);display:flex;flex-direction:column;gap:12px}
    .title-container{display:flex;align-items:baseline;gap:12px;flex-wrap:wrap}
    h1.title{font-size:34px;margin:0}
    .subtitle{font-size:14px;color:#e9e3ff;opacity:.9;font-style:italic}
    #linkList{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:15px;margin-top:20px;align-self:stretch;animation:fadeUp .45s var(--ease)}
    @keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
    .github-btn{padding:12px;background:var(--accent);border:none;border-radius:10px;color:var(--text);font-size:14px;cursor:pointer;text-align:center;transition:transform .14s var(--ease),background .14s var(--ease),box-shadow .14s var(--ease)}
    .github-btn:hover{transform:translateY(-4px);background:var(--accent-dark);box-shadow:0 8px 24px rgba(0,0,0,.18)}
    .ClokeName{padding:12px;background:var(--panel);border:1px solid var(--accent);color:var(--text);border-radius:4px;width:100%;max-width:420px}
    #gameGenBar{position:fixed;bottom:0;left:220px;right:0;background:linear-gradient(90deg,var(--accent-dark),var(--accent));display:flex;gap:10px;padding:14px;align-items:center;justify-content:center;backdrop-filter: blur(6px);transform:translateY(110%);transition:transform .35s var(--ease);box-shadow:0 -10px 30px rgba(0,0,0,.35)}
    #gameGenBar.visible{transform:translateY(0)}
    #gamePrompt{flex:1;padding:10px;border-radius:8px;border:none;background:var(--panel);color:var(--text);font-size:15px;outline:2px solid transparent;transition:box-shadow .18s var(--ease)}
    #gamePrompt:focus{box-shadow:0 6px 30px rgba(0,0,0,.3)}
    #generateGameBtn{padding:10px 16px;border-radius:8px;border:none;background:var(--panel);color:var(--text);cursor:pointer;font-weight:600;letter-spacing:.2px;transition:transform .18s var(--ease)}
    #generateGameBtn:hover{transform:translateY(-4px);background:linear-gradient(180deg,var(--panel),#3b055f)}
    #popup{position:fixed;top:22px;right:22px;background:linear-gradient(90deg,var(--accent),#a86df4);padding:14px 16px;border-radius:12px;color:var(--text);display:flex;align-items:center;gap:12px;box-shadow:0 10px 30px rgba(0,0,0,.3);opacity:0;transform:translateY(-8px) scale(.98);transition:opacity .28s var(--ease),transform .28s var(--ease);z-index:999}
    #popup.show{opacity:1;transform:none}
    #popup button{background:var(--panel);border:none;padding:8px 12px;border-radius:8px;color:var(--text);cursor:pointer}
    #popup small{opacity:.95;font-size:13px}
    @keyframes floatY{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}
    .nav-button, .github-btn, .rounded-launch-button{will-change:transform}
    ::selection{background:#b07cfb;color:#120026}
    @media (max-width:720px){
      .sidebar{width:64px}
      .main-content{margin-left:64px;padding:14px}
      #gameGenBar{left:64px}
      h1.title{font-size:22px}
      .nav-button{font-size:12px;padding:10px}
    }
  </style>
</head>
<body>
  <canvas id="bgCanvas"></canvas>

  <div class="sidebar" id="sidebar">
    <h1>Sev Essentials</h1>
    <button class="nav-button active" onclick="switchTab('Tools', this)">Tools</button>
    <button class="nav-button" onclick="switchTab('Games', this)">Games</button>
    <button class="nav-button" onclick="switchTab('More', this)">More</button>
    <div class="sidebar-launch-container">
      <button class="rounded-launch-button" onclick="switchTab('Settings', this)">Settings</button>
      <button class="rounded-launch-button" onclick="reloadself()">Reload</button>
    </div>
    <a href="https://github.com/sevisadev/" target="_blank" class="sidebar-footer">Made By Sevvy Wevvy</a>
  </div>

  <div class="main-content" id="mainContent">
    <div class="title-container">
      <h1 class="title" id="tabTitle">Tools</h1>
      <span class="subtitle" id="tabSubtitle"></span>
    </div>
    <div id="linkList"></div>
  </div>

  <div id="gameGenBar">
    <input id="gamePrompt" placeholder="Describe your full game (engine, mechanics, visuals). Output must be a complete standalone HTML document.">
    <button id="generateGameBtn" onclick="generateGame()">Generate Game</button>
  </div>

  <div id="popup">
    <small id="popupText">AI-generated game is ready.</small>
    <button id="openGameBtn" onclick="openAIGame()">Open</button>
  </div>

  <script>
    const canvas=document.getElementById('bgCanvas');
    const ctx=canvas.getContext('2d');
    let Particals=true;
    let width=canvas.width=window.innerWidth;
    let height=canvas.height=window.innerHeight;
    const spheres=[];
    for(let i=0;i<72;i++){spheres.push({x:Math.random()*(width-220)+220,y:Math.random()*height,radius:Math.random()*6+1.2,speed:Math.random()*1.6+0.2,drift:(Math.random()-0.5)*0.6})}
    function animate(){
      ctx.clearRect(0,0,width,height);
      for(let s of spheres){
        ctx.beginPath();
        ctx.fillStyle='rgba(255,255,255,0.06)';
        ctx.arc(s.x,s.y,s.radius,0,Math.PI*2);
        ctx.fill();
        s.y+=s.speed;
        s.x+=s.drift;
        s.speed+=Math.sin((Date.now()+s.radius*1000)/8000)*0.0006;
        if(s.y>height+s.radius){s.y=-s.radius;s.x=Math.random()*width}
        if(s.x>width+s.radius){s.x=-s.radius}
        if(s.x<-s.radius){s.x=width+s.radius}
      }
      requestAnimationFrame(animate);
    }
    animate();
    window.addEventListener('resize',()=>{width=canvas.width=window.innerWidth;height=canvas.height=window.innerHeight});

    function reloadself(){
      fetch('https://raw.githubusercontent.com/sevisadev/sev-essentials/main/html%20holder.html').then(r=>{if(!r.ok)throw new Error('Network response was not ok');return r.text()}).then(html=>{const newWindow=window.open('about:blank','_blank');if(newWindow){newWindow.document.write(html);newWindow.document.close();window.close()}else{alert('Pop-up blocked. Please allow pop-ups for this site.')}}).catch(e=>alert('Failed to load HTML: '+e.message))
    }

    const tabLinks={
      "Tools":[{name:"HTML Runner",url:"https://raw.githubusercontent.com/sevisadev/sev-essentials/refs/heads/main/html/tools/htmlr.html"},{name:"Bookmarklet Maker",url:"https://raw.githubusercontent.com/sevisadev/sev-essentials/refs/heads/main/html/tools/bookmarklet.html"},{name:"Sev Encoder",url:"https://raw.githubusercontent.com/sevisadev/sev-essentials/refs/heads/main/html/tools/B64.html"},{name:"Sev HTML One-Liner",url:"https://raw.githubusercontent.com/sevisadev/sev-essentials/refs/heads/main/html/tools/1l.html"},{name:"Sev Mode Switcher",url:"https://raw.githubusercontent.com/sevisadev/sev-essentials/refs/heads/main/html/tools/sms.html"},{name:"Sev File2HTML",url:"https://raw.githubusercontent.com/sevisadev/sev-essentials/refs/heads/main/html/tools/sfth.html"}],
      "Games":[{name:"Snake Game",url:"https://raw.githubusercontent.com/sevisadev/sev-essentials/refs/heads/main/html/games/snake.html"},{name:"Tetris",url:"https://raw.githubusercontent.com/sevisadev/sev-essentials/refs/heads/main/html/games/tetris.html"},{name:"Sev Clicker",url:"https://raw.githubusercontent.com/sevisadev/sev-essentials/refs/heads/main/html/games/sev-clicker.html"},{name:"Sev Pulse",url:"https://raw.githubusercontent.com/sevisadev/sev-essentials/refs/heads/main/html/games/sev-pulse.html"},{name:"Sev's Minesweeper",url:"https://raw.githubusercontent.com/sevisadev/sev-essentials/refs/heads/main/html/games/sevs-minesweeper.html"},{name:"Sev's Connect The Pipes",url:"https://raw.githubusercontent.com/sevisadev/sev-essentials/refs/heads/main/html/games/connect-the-pipes.html"},{name:"HTML Tower Defence",url:"https://raw.githubusercontent.com/sevisadev/sev-essentials/refs/heads/main/html/games/html-td.html"},{name:"Racing",url:"https://raw.githubusercontent.com/sevisadev/sev-essentials/refs/heads/main/html/games/car-game.html"}],
      "More":[{name:"Sev Browser",url:"https://raw.githubusercontent.com/sevisadev/sev-essentials/refs/heads/main/html/more/sev-browser.html"},{name:"Fireworks",url:"https://raw.githubusercontent.com/sevisadev/sev-essentials/refs/heads/main/html/more/fireworks.html"},{name:"Sev Cursor Playground",url:"https://raw.githubusercontent.com/sevisadev/sev-essentials/refs/heads/main/html/more/cursorplayground.html"},{name:"Github",url:"link",prox:"https://github.com/sevisadev/sev-essentials/tree/main"}]
    };

    function switchTab(tabName,btn){
      document.querySelectorAll('.nav-button').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      document.getElementById('tabTitle').innerText=tabName;
      const subtitle=document.getElementById('tabSubtitle');
      if(tabName==="Games"){subtitle.innerText="You may have to click on some games when they are opened for them to work"}else if(tabName==="Bookmarklets"){subtitle.innerText="Drag the bookmarklet you want into your bookmarks bar"}else if(tabName==="Settings"){subtitle.innerText="Grayson Shults"}else{subtitle.innerText=""}
      const listContainer=document.getElementById('linkList');listContainer.innerHTML='';
      document.getElementById('gameGenBar').classList.toggle('visible', tabName==="Games");
      if(tabName==="Settings"){
        const input1=document.createElement('input');
        input1.type='text';
        input1.className='ClokeName';
        input1.placeholder='Tab Name';
        listContainer.appendChild(input1);
        input1.addEventListener('input',event=>{document.title=event.target.value===''?'Sev Essentials':event.target.value});
      }
      (tabLinks[tabName]||[]).forEach(link=>{
        if(tabName==="Bookmarklets"){
          const linkElement=document.createElement('a');
          linkElement.className='github-btn';
          linkElement.innerText=link.name;
          linkElement.href=link.url;
          linkElement.target='_blank';
          linkElement.onclick=event=>event.preventDefault();
          linkElement.draggable=true;
          linkElement.addEventListener('dragstart',event=>{event.dataTransfer.setData('text/plain',link.url)});
          listContainer.appendChild(linkElement);
        } else {
          const button=document.createElement('button');
          button.className='github-btn';
          button.innerText=link.name;
          if(link.url==="link"){button.onclick=()=>window.open(link.prox,'_blank')}else{button.onclick=()=>openGitHubHTML(link.url)}
          listContainer.appendChild(button);
        }
      });
    }

    function openGitHubHTML(url){
      fetch(url).then(r=>r.text()).then(html=>{const newTab=window.open('about:blank','_blank');newTab.document.write(html);newTab.document.close()}).catch(err=>alert('Failed to load HTML: '+err))
    }

    let aiGameCode="";
    const bc=new BroadcastChannel('sev-ai-game');
    bc.addEventListener('message',ev=>{
      if(ev.data && ev.data.code){aiGameCode=ev.data.code;showPopup();}
    });

    function generateGame(){
      const rawPrompt=document.getElementById('gamePrompt').value.trim();
      if(!rawPrompt){return}
      const instruction=`Please generate a complete, standalone, ready-to-run HTML5 game as a single document. Output only the full HTML document (starting with <!DOCTYPE html> and including all CSS and JavaScript inline). The game must be playable in a modern browser without external resources. Do not include any explanatory text or JSON wrappers. Make it well-structured, compact, and include smooth in-game animations. User prompt: `;
      const finalPrompt=instruction+rawPrompt;
      fetch('https://api.gggravity.org/meowster-ai.php',{
        method:'POST',
        headers:{'Content-Type':'application/x-www-form-urlencoded'},
        body:'prompt='+encodeURIComponent(finalPrompt)
      }).then(r=>{
        if(!r.ok)throw new Error('Network response was not ok');
        return r.json();
      }).then(data=>{
        const resp=(data && (data.response||data.result||data.output))||'';
        if(!resp){alert('No game code returned.');return}
        aiGameCode=resp;
        bc.postMessage({code:aiGameCode});
        showPopup();
      }).catch(e=>{
        alert('Failed to generate game: '+(e.message||e));
      });
    }

    const popup=document.getElementById('popup');
    const popupText=document.getElementById('popupText');

    function showPopup(){
      popup.classList.add('show');
      setTimeout(()=>{popup.classList.remove('show')},24000);
    }

    function openAIGame(){
      if(!aiGameCode)return;
      const w=window.open('about:blank','_blank');
      if(w){
        w.document.write(aiGameCode);
        w.document.close();
      } else {
        alert('Pop-up blocked. Allow pop-ups to open the generated game.');
      }
      popup.classList.remove('show');
    }

    switchTab('Tools',document.querySelector('.nav-button:nth-of-type(1)'));
  </script>
</body>
</html>
