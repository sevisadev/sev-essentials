<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Sev Essentials</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
:root{
  --bg:#4b097b;--accent:#8a2be2;--accent-dark:#6a0dad;--panel:#4b097b;--text:#ffffff;--ease:cubic-bezier(.16,.84,.24,1);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:"Times New Roman",serif;background:var(--bg);color:var(--text);overflow:hidden}
canvas{position:fixed;top:0;left:0;z-index:-2;opacity:1;transition:opacity .6s var(--ease)}
.sidebar{position:fixed;top:0;left:0;width:220px;height:100%;background:linear-gradient(180deg,var(--accent),#9f53f0);display:flex;flex-direction:column;padding:0;border-right:1px solid rgba(0,0,0,.06);transform:translateZ(0)}
.sidebar h1{margin:0;padding:18px 12px;text-align:left;font-size:28px}
.nav-button{display:block;width:100%;padding:12px 14px;background:var(--accent);color:var(--text);border:none;text-align:left;font-size:16px;cursor:pointer;border-top-right-radius:20px;border-bottom-right-radius:20px;outline:0;position:relative;overflow:hidden}
.nav-button .label{display:inline-block;transform-origin:left center;transition:transform .28s var(--ease);will-change:transform}
.nav-button:hover .label{transform:translateX(10px) scale(1.03)}
.nav-button.active{background:var(--panel)}
.sidebar-launch-container{margin-top:auto;padding:12px;display:flex;flex-direction:column;gap:8px}
.rounded-launch-button{padding:10px 20px;background:var(--accent);color:var(--text);border:none;border-radius:30px;cursor:pointer;font-size:15px;width:96%;align-self:flex-start;transition:transform .22s var(--ease)}
.rounded-launch-button:hover{transform:translateY(-6px)}
.sidebar-footer{padding:14px 12px;text-align:left;font-size:14px;color:var(--text);text-decoration:underline;cursor:pointer;background:transparent}
.main-content{margin-left:220px;padding:28px;height:100vh;overflow:auto;display:flex;flex-direction:column;gap:12px;transition:all .35s var(--ease)}
.title-container{display:flex;align-items:baseline;gap:12px;flex-wrap:wrap}
h1.title{font-size:34px;margin:0;animation:fadeIn .6s var(--ease)}
.subtitle{font-size:14px;color:#e9e3ff;opacity:.95;font-style:italic}
#linkList{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:15px;margin-top:20px;align-self:stretch}
.github-btn{padding:12px;background:var(--accent);border:none;border-radius:10px;color:var(--text);font-size:14px;cursor:pointer;text-align:center;transition:transform .18s var(--ease),box-shadow .18s var(--ease);will-change:transform}
.github-btn:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(0,0,0,.28)}
.ClokeName{padding:12px;background:var(--panel);border:1px solid var(--accent);color:var(--text);border-radius:4px;width:100%;max-width:420px}
#gameGenBar{position:fixed;bottom:18px;left:240px;right:18px;background:linear-gradient(90deg,var(--accent-dark),var(--accent));display:flex;gap:10px;padding:12px;border-radius:12px;align-items:center;justify-content:center;backdrop-filter:blur(6px);transform:translateY(24px);transition:transform .36s var(--ease),opacity .36s var(--ease);opacity:0}
#gameGenBar.visible{transform:translateY(0);opacity:1}
#gamePrompt{flex:1;padding:10px;border-radius:10px;border:none;background:rgba(75,9,123,0.8);color:var(--text);font-size:15px;outline:2px solid transparent;transition:box-shadow .18s var(--ease)}
#generateGameBtn{padding:10px 16px;border-radius:10px;border:none;background:linear-gradient(180deg,var(--panel),#3b055f);color:var(--text);cursor:pointer;font-weight:600;transition:transform .18s var(--ease)}
#generateGameBtn:active{transform:translateY(2px)}
#popup{position:fixed;top:22px;right:22px;background:linear-gradient(90deg,var(--accent),#a86df4);padding:14px 16px;border-radius:12px;color:var(--text);display:flex;align-items:center;gap:12px;box-shadow:0 18px 50px rgba(0,0,0,.36);opacity:0;transform:translateY(-8px) scale(.98);transition:opacity .28s var(--ease),transform .28s var(--ease);z-index:999}
#popup.show{opacity:1;transform:none}
#popup .txt{font-size:13px}
#popup button{background:var(--panel);border:none;padding:8px 12px;border-radius:8px;color:var(--text);cursor:pointer}
@keyframes fadeIn{from{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:none}}
@media (max-width:720px){
  .sidebar{width:64px}
  .main-content{margin-left:64px;padding:14px}
  #gameGenBar{left:74px;right:8px}
  h1.title{font-size:22px}
  .nav-button{font-size:12px;padding:10px}
}

#particles2 { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; opacity: 0.95; transition: opacity .6s var(--ease); }
</style>
</head>
<body>
<canvas id="bg"></canvas>
<div class="sidebar" id="sidebar">
  <h1>Sev Essentials</h1>
  <button class="nav-button active" onclick="switchTab('Tools', this)"><span class="label">Tools</span></button>
  <button class="nav-button" onclick="switchTab('Games', this)"><span class="label">Games</span></button>
  <button class="nav-button" onclick="switchTab('More', this)"><span class="label">More</span></button>
  <div class="sidebar-launch-container">
    <button class="rounded-launch-button" onclick="switchTab('Settings', this)">Settings</button>
    <button class="rounded-launch-button" onclick="reloadself()">Reload</button>
  </div>
  <a href="https://github.com/sevvy-wevvy/" target="_blank" class="sidebar-footer">Made By Sevvy Wevvy</a>
</div>
<div class="main-content" id="mainContent">
  <div class="title-container">
    <h1 class="title" id="tabTitle">Tools</h1>
    <span class="subtitle" id="tabSubtitle"></span>
  </div>
  <div id="linkList"></div>
</div>
<div id="gameGenBar">
  <input id="gamePrompt" placeholder="Describe your full game (engine, mechanics, visuals)." />
  <button id="generateGameBtn" onclick="generateGame()">Generate Game</button>
</div>
<div id="popup" aria-live="polite">
  <div class="txt" id="popupText">AI-generated game is ready.</div>
  <button id="openGameBtn" onclick="openAIGame()">Open</button>
</div>
<canvas id="particles2"></canvas>

<script>
const canvas=document.getElementById('bg');
const ctx=canvas.getContext('2d');
let W=canvas.width=innerWidth;
let H=canvas.height=innerHeight;
let parts=[];
function makeParticles(n=110){
  parts=[];
  for(let i=0;i<n;i++){
    parts.push({x:Math.random()*W,y:Math.random()*H,r:Math.random()*6+1,s:Math.random()*1.6+0.2,dx:(Math.random()-0.5)*0.8,a:Math.random()*0.45+0.05});
  }
}
makeParticles();
function tick(){
  ctx.clearRect(0,0,W,H);
  for(const p of parts){
    ctx.beginPath();
    ctx.fillStyle='rgba(255,255,255,'+p.a+')';
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fill();
    p.y+=p.s;
    p.x+=p.dx + Math.sin((Date.now()+p.r*200)/1200)*0.2;
    if(p.y>H+p.r){p.y=-p.r;p.x=Math.random()*W}
    if(p.x>W+p.r){p.x=-p.r}
    if(p.x<-p.r){p.x=W+p.r}
  }
  requestAnimationFrame(tick);
}
tick();
addEventListener('resize',()=>{W=canvas.width=innerWidth;H=canvas.height=innerHeight;makeParticles();});
function reloadself(){
  fetch('https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/main/html%20holder.html').then(r=>{if(!r.ok)throw new Error('Network response was not ok');return r.text()}).then(html=>{const nw=window.open('about:blank','_blank');if(nw){nw.document.write(html);nw.document.close();window.close()}else alert('Pop-up blocked. Please allow pop-ups for this site.')}).catch(e=>alert('Failed to load HTML: '+e.message));
}
const tabLinks={
  "Tools":[{name:"HTML Runner",url:"https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/refs/heads/main/html/tools/htmlr.html"},
           {name:"Bookmarklet Maker",url:"https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/refs/heads/main/html/tools/bookmarklet.html"},
           {name:"Sev Encoder",url:"https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/refs/heads/main/html/tools/B64.html"},
           {name:"Sev HTML One-Liner",url:"https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/refs/heads/main/html/tools/1l.html"},
           {name:"Sev Mode Switcher",url:"https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/refs/heads/main/html/tools/sms.html"},
           {name:"Sev File2HTML",url:"https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/refs/heads/main/html/tools/sfth.html"}
          ],
  
  "Games":[{name:"Snake Game",url:"https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/refs/heads/main/html/games/snake.html"},
           {name:"Tetris",url:"https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/refs/heads/main/html/games/tetris.html"},
           {name:"Sev Clicker",url:"https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/refs/heads/main/html/games/sev-clicker.html"},
           {name:"Sev Pulse",url:"https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/refs/heads/main/html/games/sev-pulse.html"},
           {name:"Sev's Minesweeper (OLD)",url:"https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/refs/heads/main/html/games/sevs-minesweeper.html"},
           {name:"Sev's Connect The Pipes",url:"https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/refs/heads/main/html/games/connect-the-pipes.html"},
           {name:"HTML Tower Defence",url:"https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/refs/heads/main/html/games/html-td.html"},
           {name:"Racing",url:"https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/refs/heads/main/html/games/car-game.html"},
           {name:"Meth Mines",url:"https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/refs/heads/main/html/games/mm.html"}
          ],
  
  "More":[{name:"Sev Browser",url:"https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/refs/heads/main/html/more/sev-browser.html"},
          {name:"Fireworks",url:"https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/refs/heads/main/html/more/fireworks.html"},
          {name:"Sev Cursor Playground",url:"https://raw.githubusercontent.com/sevvy-wevvy/sev-essentials/refs/heads/main/html/more/cursorplayground.html"},
          {name:"Github",url:"link",prox:"https://github.com/sevvy-wevvy/sev-essentials/tree/main"}
         ]
};
function switchTab(name, btn){
  document.querySelectorAll('.nav-button').forEach(b=>b.classList.remove('active'));
  if(btn) btn.classList.add('active');
  document.getElementById('tabTitle').innerText = name;
  const subtitle = document.getElementById('tabSubtitle');
  if(name==="Games") subtitle.innerText="You may have to click on some games when they are opened for them to work"; else if(name==="Bookmarklets") subtitle.innerText="Drag the bookmarklet you want into your bookmarks bar"; else if(name==="Settings") subtitle.innerText="Grayson Shults"; else subtitle.innerText="";
  const list=document.getElementById('linkList'); list.innerHTML='';
  document.getElementById('gameGenBar').classList.toggle('visible', name==="Games");
  if(name==="Settings"){
    const input=document.createElement('input'); input.type='text'; input.className='ClokeName'; input.placeholder='Tab Name'; list.appendChild(input);
    input.addEventListener('input',e=>{document.title = e.target.value===''?'Sev Essentials':e.target.value});
  }
  (tabLinks[name]||[]).forEach((l,i)=>{
    if(name==="Bookmarklets"){
      const a=document.createElement('a'); a.className='github-btn'; a.innerText=l.name; a.href=l.url; a.target='_blank'; a.onclick=e=>e.preventDefault(); a.draggable=true; a.addEventListener('dragstart',e=>e.dataTransfer.setData('text/plain',l.url)); a.style.transitionDelay=(i*30)+'ms'; list.appendChild(a);
    } else {
      const b=document.createElement('button'); b.className='github-btn'; b.innerText=l.name;
      if(l.url==="link") b.onclick=()=>window.open(l.prox,'_blank'); else b.onclick=()=>openGitHubHTML(l.url);
      b.style.transitionDelay=(i*30)+'ms'; list.appendChild(b);
    }
  });
}
function openGitHubHTML(url){ fetch(url).then(r=>r.text()).then(html=>{const w=window.open('about:blank','_blank'); w.document.write(html); w.document.close();}).catch(e=>alert('Failed to load HTML: '+e));}
let aiGameCode="";
const bc=new BroadcastChannel('sev-ai-game');
bc.addEventListener('message',ev=>{
  if(!ev.data) return;
  if(ev.data.status==='generating') { localGenerating(true); showGenerating(); }
  if(ev.data.status==='ready') { if(ev.data.code) aiGameCode=ev.data.code; localGenerating(false); showReady(); }
});
function sanitize(code){
  if(!code) return '';
  code = code.replace(/^\uFEFF/,'');
  code = code.replace(/^\s*```(?:html)?\s*/i,'');
  code = code.replace(/\s*```[\s\S]*$/,'');
  return code.trim();
}
let generating=false;
function localGenerating(state){
  generating=state;
  const openBtn=document.getElementById('openGameBtn');
  openBtn.style.display = state ? 'none' : 'inline-block';
  const genBtn=document.getElementById('generateGameBtn');
  genBtn.disabled = state;
  genBtn.style.opacity = state ? '0.7' : '1';
}
function notify(title,body){
  if(window.Notification && Notification.permission==='granted'){ try{ new Notification(title,{body:body}) }catch(e){} }
  else if(window.Notification && Notification.permission!=='denied'){ Notification.requestPermission().then(p=>{ if(p==='granted'){ try{ new Notification(title,{body:body}) }catch(e){} }})}
}
let popupTimer=0;
function showGenerating(){
  const p=document.getElementById('popup'); const t=document.getElementById('popupText');
  t.innerText='Generating game...'; p.classList.add('show'); notify('Sev Essentials','Generating game — this may take a moment'); clearTimeout(popupTimer); popupTimer=setTimeout(()=>{p.classList.remove('show')},10000);
}
function showReady(){
  const p=document.getElementById('popup'); const t=document.getElementById('popupText'); t.innerText='AI-generated game is ready.'; p.classList.add('show'); notify('Sev Essentials','AI-generated game ready'); clearTimeout(popupTimer); popupTimer=setTimeout(()=>{p.classList.remove('show')},10000);
}
function generateGame(){
  const raw=document.getElementById('gamePrompt').value.trim();
  if(!raw) return;
  aiGameCode=''; localGenerating(true); showGenerating(); bc.postMessage({status:'generating'});
  const instruction = `
You are to generate a COMPLETE, fully self-contained, single-file HTML5 game. Your output must be ONLY the full HTML document, starting with <!DOCTYPE html>. Do not include markdown formatting, explanations, or code fences. The game must be visually rich and high-quality using only CSS, Canvas, SVG, and dynamically generated visuals — NO external images, NO internal base64-encoded images, and NO external dependencies. Everything must be drawn, styled, or animated programmatically.

The game must be modern, polished, responsive, and immediately playable on desktop and mobile browsers. Use clean semantic HTML, inline CSS, and inline JavaScript. Include:
- A responsive layout with smooth transitions and UI animations.
- High-quality visuals using Canvas or SVG (e.g., gradients, shadows, lighting effects, particles).
- A well-designed title screen, in-game UI, pause menu, and game over screen.
- Keyboard and touch controls with clear instructions.
- Smooth frame-rate–independent movement and animations using delta time.
- Efficient game loops with requestAnimationFrame and proper state management.
- Detailed gameplay mechanics, power-ups, enemies or obstacles, scoring, and difficulty progression.
- In-game tutorial overlay that explains controls clearly.
- Sound effects using Web Audio API (no external files).
- Graceful handling of different screen sizes and resolutions.
- Optimized code structure without unnecessary comments or libraries.

The game should feel like a complete, professional browser game — polished, engaging, and technically well-built. Focus on gameplay depth, smooth performance, and a visually appealing presentation using only HTML5/CSS/JS features. Build all art assets dynamically via code.

Now create the best possible game that fully satisfies the user's concept:
`;
const finalPrompt = instruction + raw;
  fetch('https://api.gggravity.org/meowster-ai.php',{
    method:'POST',
    headers:{'Content-Type':'application/x-www-form-urlencoded'},
    body:'prompt='+encodeURIComponent(finalPrompt)
  }).then(r=>{ if(!r.ok) throw new Error('Network response was not ok'); return r.json(); }).then(data=>{
    const resp=(data && (data.response||data.result||data.output))||'';
    if(!resp){ alert('No game code returned.'); localGenerating(false); bc.postMessage({status:'ready',code:''}); return; }
    const cleaned=sanitize(resp);
    aiGameCode=cleaned;
    bc.postMessage({status:'ready',code:aiGameCode});
    localGenerating(false);
    showReady();
  }).catch(e=>{
    alert('Failed to generate game: '+(e.message||e));
    localGenerating(false); document.getElementById('popup').classList.remove('show'); bc.postMessage({status:'ready',code:''});
  });
}
function openAIGame(){
  if(!aiGameCode){ alert('No generated game available.'); return; }
  const w=window.open('about:blank','_blank');
  if(!w){ alert('Pop-up blocked. Allow pop-ups to open the generated game.'); return; }
  w.document.write(aiGameCode); w.document.close();
  document.getElementById('popup').classList.remove('show');
}
switchTab('Tools', document.querySelector('.nav-button:nth-of-type(1)'));
</script>

<script>
(function(){
  const c = document.getElementById('particles2');
  const ctx2 = c.getContext('2d');
  let W2 = c.width = innerWidth;
  let H2 = c.height = innerHeight;
  const particles2 = [];
  const settings = {
    count: Math.round((W2 * H2) / 9000) + 40,
    maxSize: 3.6,
    minSize: 0.8,
    speed: 0.2,
    edgeGlow: true
  };

  function rand(min, max){ return Math.random()*(max-min)+min; }

  function make(){
    particles2.length = 0;
    const n = settings.count;
    for(let i=0;i<n;i++){
      particles2.push({
        x: Math.random()*W2,
        y: Math.random()*H2,
        vx: rand(-0.15,0.15),
        vy: rand(-0.05,0.5),
        r: rand(settings.minSize, settings.maxSize),
        life: rand(60, 360),
        age: Math.floor(rand(0,360)),
        hue: 260 + Math.random()*60,
        alpha: rand(0.06,0.28)
      });
    }
  }

  function drawParticle(p){
    const grad = ctx2.createRadialGradient(p.x, p.y, 0, p.x, p.y, p.r*4);
    const h = Math.floor(p.hue);
    grad.addColorStop(0, `hsla(${h},90%,70%,${p.alpha})`);
    grad.addColorStop(0.35, `hsla(${h},85%,55%,${p.alpha*0.7})`);
    grad.addColorStop(1, `hsla(${h},60%,40%,0)`);
    ctx2.beginPath();
    ctx2.fillStyle = grad;
    ctx2.arc(p.x, p.y, p.r*4, 0, Math.PI*2);
    ctx2.fill();
  }

  function step(dt){
    ctx2.clearRect(0,0,W2,H2);
    for(let i=0;i<particles2.length;i++){
      const p = particles2[i];
      p.age += dt * 0.06;
      p.x += p.vx * dt * (0.9 + p.r*0.15);
      p.y += p.vy * dt * (0.9 + p.r*0.15);
      p.x += Math.sin((p.age + i*13)/1200) * 0.12;
      p.y += Math.cos((p.age + i*7)/1000) * 0.08;

      if(p.x > W2 + p.r*8) p.x = -p.r*8;
      if(p.x < -p.r*8) p.x = W2 + p.r*8;
      if(p.y > H2 + p.r*8) p.y = -p.r*8;
      if(p.y < -p.r*8) p.y = H2 + p.r*8;

      p.r += Math.sin(p.age/200 + i) * 0.02;
      if(p.r < settings.minSize) p.r = settings.minSize;
      if(p.r > settings.maxSize) p.r = settings.maxSize;

      drawParticle(p);
    }

    for(let i=0;i<particles2.length;i++){
      const a = particles2[i];
      for(let j=i+1;j<particles2.length && j < i+8; j++){
        const b = particles2[j];
        const dx = a.x - b.x;
        const dy = a.y - b.y;
        const d2 = dx*dx + dy*dy;
        if(d2 < 16000){
          const dist = Math.sqrt(d2);
          const alpha = Math.max(0, 0.12 - (dist/450));
          ctx2.beginPath();
          ctx2.strokeStyle = `hsla(${Math.floor((a.hue+b.hue)/2)},80%,60%,${alpha})`;
          ctx2.lineWidth = 0.7;
          ctx2.moveTo(a.x, a.y);
          ctx2.lineTo(b.x, b.y);
          ctx2.stroke();
        }
      }
    }
  }

  let last = performance.now();
  function loop(now){
    const dt = Math.min(40, now - last);
    last = now;
    step(dt);
    requestAnimationFrame(loop);
  }

  function onResize(){
    W2 = c.width = innerWidth;
    H2 = c.height = innerHeight;
    settings.count = Math.round((W2 * H2) / 9000) + 40;
    make();
  }
  addEventListener('resize', onResize);

  c.style.opacity = '0';
  setTimeout(()=>{ c.style.transition = 'opacity 900ms ease'; c.style.opacity = '0.95'; }, 80);

  make();
  requestAnimationFrame(loop);

  window.__sevParticlesLayer = {
    show: ()=>{ c.style.opacity = '0.95'; },
    hide: ()=>{ c.style.opacity = '0'; }
  };
})();
</script>
</body>
</html>
